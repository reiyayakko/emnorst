<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/math/bigfloat.js | Reiyayakko core</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/reiyayakko/reiyayakko-core"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#lib">lib</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Num2FracStr">Num2FracStr</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#math">math</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/math/bigfloat.js~BigFloat.html">BigFloat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-abs">abs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-average">average</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-factorial">factorial</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-max">max</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-median">median</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-min">min</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-hyper">hyper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-add">add</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-div">div</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mathEval">mathEval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mul">mul</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sub">sub</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-fibonacci$">fibonacci$</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-primeFactorization">primeFactorization</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-NumberTypes">NumberTypes</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#object">object</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clone_WIP">clone_WIP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deepEquals">deepEquals</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allKeys">allKeys</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-has">has</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-property">property</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-structure">structure</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#object-clone">object/clone</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-copy">copy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clone">clone</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-undertake">undertake</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#object-deepbase">object/deepbase</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allocate">allocate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deepBase">deepBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-prop">prop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-prop">prop</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utility">utility</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utility/index.js~MemoMap.html">MemoMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-count">count</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generate">generate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generator">generator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-gurop">gurop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reduce">reduce</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-callorElse">callorElse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prop">prop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-substitute">substitute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-typeCheck">typeCheck</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-first">first</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-index">index</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-iterableIndex">iterableIndex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-last">last</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-restSplit">restSplit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-splice">splice</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-argument">argument</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-memoize">memoize</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-debounce">debounce</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-throttle">throttle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-typeOf">typeOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-random">random</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randomStr">randomStr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toPrimitive">toPrimitive</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-uniq">uniq</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-zip">zip</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-range">range</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ObjectToStringTypes">ObjectToStringTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-TypedArray">TypedArray</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utility-is">utility/is</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-equals">equals</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-equalsType">equalsType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEven">isEven</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isInfinity">isInfinity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNegative">isNegative</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isOdd">isOdd</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isPositive">isPositive</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isPrime">isPrime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isArguments">isArguments</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isBoolean">isBoolean</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isError">isError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isFunction">isFunction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isMap">isMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNull">isNull</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNumber">isNumber</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isObject">isObject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isObjectLike">isObjectLike</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isRegExp">isRegExp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSet">isSet</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isString">isString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSymbol">isSymbol</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isTypedArray">isTypedArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isUndefined">isUndefined</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isWeakMap">isWeakMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isWeakSet">isWeakSet</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isArrayLike">isArrayLike</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmpty">isEmpty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isIterable">isIterable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isThrowError">isThrowError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-isArray">isArray</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utility-loop">utility/loop</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-forIn">forIn</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-forIndex">forIndex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-forOf">forOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-iterate">iterate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-inOrder">inOrder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-previous">previous</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-doWhile">doWhile</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/math/bigfloat.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">
// @ts-check

import { first, splice } from &quot;../utility/getIndex&quot;;
import { doWhile, equals, forIndex, forOf, previous, substitute, zip } from &quot;../utility/index&quot;;
import { isInfinity, isNegative, isNull, isNumber, isPositive, isString, isBoolean } from &quot;../utility/is/index&quot;;

/**
 * @typedef {Number | String | BigFloat} NumberTypes
 */

const isSafe = (target)=&gt;(
    target.integer.length &lt; 16 &amp;&amp; !target.decimal
);

/**
 * WIP: In development.
 *
 * Alpha: &#x7B26;&#x53F7;&#x4E00;&#x90E8;&#x30D0;&#x30B0;&#x3042;&#x308A;&#x3001;&#x9664;&#x7B97;&#x5BFE;&#x5FDC;&#x3067;&#x304D;&#x3066;&#x306A;&#x3044;&#x3001;&#x304A;&#x305D;&#x3089;&#x304F;&#x4ED6;&#x306B;&#x3082;&#x30D0;&#x30B0;&#x3042;&#x308A;&#x3002;
 *
 * OPTIMIZE: &#x6841;&#x304C;&#x5897;&#x3048;&#x305F;&#x3068;&#x304D;&#x306E;&#x30D1;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30F3;&#x30B9;&#x304C;&#x3072;&#x3069;&#x3044;&#x3002;
 *
 * IDEA: String&#x306B;&#x3088;&#x3063;&#x3066;1&#x6841;&#x305A;&#x3064;&#x4FDD;&#x5B58;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;
 * &#x4E57;&#x7B97;&#x3067;Number.MAX_SAFE_INTEGER&#x3092;&#x8D85;&#x3048;&#x306A;&#x3044;7&#x6841;&#x305A;&#x3064;Array&#x306B;&#x4FDD;&#x5B58;
 * @export
 * @class BigFloat
 */
export class BigFloat {
    /**
     * Creates an instance of BigFloat.
     * @memberof BigFloat
     * @param {NumberTypes} number
     */
    constructor(number=0){
        this.setNumber(number);
        this.format();
        /**
         * &#x5C11;&#x6570;&#x70B9;&#x4EE5;&#x4E0B;&#x6709;&#x52B9;&#x6841;&#x6570;
         * @type {Object}
         */
        this.digits = {
            integer: 1000,
            decimal: 100,
            valid: 16
        };
    }
    /**
     * @readonly
     * @memberof BigFloat
     */
    // eslint-disable-next-line class-methods-use-this
    // get [Symbol.toStringTag](){
    //     return &quot;BigFloat&quot;;
    // }
    /**
     * @readonly
     * @memberof BigFloat
     */
    // get sign(){
    //     return this.isPositive ? &quot;+&quot; : &quot;-&quot;;
    // }
    setSign(sign){
        this.isPositive
            = isString(sign) ? first(sign) !== &quot;-&quot;
            : isNumber(sign) ? isPositive(sign)
            : isBoolean(sign) ? sign
            : sign instanceof BigFloat ? sign.isPositive
            : null;
    }
    /**
     * &#x5F15;&#x6570;&#x306E;&#x6570;&#x5B57;&#x3092;this&#x306E;Bigfloat&#x306B;&#x4EE3;&#x5165;
     *
     * @memberof BigFloat
     * @param {NumberTypes} number
     */
    setNumber(number){
        // @ts-ignore
        if(Number.isNaN(number) || isInfinity(number)){
            this.exception = number;
            // @ts-ignore
            number = (Math.sign(number) || &quot;&quot;).toString().slice(0, 1);
        }else // IDEA: &#x7121;&#x9650;&#x3001;&#x5FAA;&#x74B0;&#x5C0F;&#x6570;&#x7B49;
            this.exception = null;
        number = String(number);
        const [fst] = number;
        // &#x6B63;&#x8CA0;&#x7B26;&#x53F7;
        this.setSign(fst);
        number = fst === &quot;-&quot; || fst === &quot;+&quot;
            ? number.slice(1) : number;
        const point = number.indexOf(&quot;.&quot;);
        const decimalPoint = point !== -1 ? point : Infinity;
        this.integer = number.slice(0, decimalPoint);
        this.decimal = number.slice(decimalPoint + 1);
    }
    /**
     * integer, decimal&#x306E;padding&#x3092;&#x6307;&#x5B9A;&#x3057;&#x3066;&#x6570;&#x5B57;&#x3092;&#x53D6;&#x5F97;
     *
     * @memberof BigFloat
     * @param {Number} int integer&#x306E;padding
     * @param {Number} dec decimal&#x306E;padding
     * @return {Number[]} full number
     */
    getNumber(int=1, dec=0){
        const _ = this.integer.padStart(int, &quot;0&quot;) + this.decimal.padEnd(dec, &quot;0&quot;);
        const result = [];
        forIndex(_.length, (index)=&gt;{
            result.push(Number(_[index]));
        });
        return result;
    }
    setDecimalPoint(decimalPoint=0){
        const number = this.getNumber().join(&quot;&quot;);
        const decimal = number.length - decimalPoint;
        this.integer = number.slice(0, decimal);
        this.decimal = number.slice(decimal);
    }
    format(){
        this.integer = this.integer.replace(/^0+/, &quot;&quot;);
        this.decimal = this.decimal.replace(/0+$/, &quot;&quot;);
        return this;
    }
    toString(){
        return (!isNull(this.exception)
            ? String(this.exception)
            : this.sign.concat(
                this.integer || &quot;0&quot;,
                this.decimal
                    ? `.${this.decimal}`
                    : &quot;&quot;
            ));
    }
    valueOf(){
        return substitute([this.exception, this.toString()]);
    }
    /**
     * &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x7248;add
     * @memberof BigFloat
     * @param {number} number
     * @return
     */
    increment(number=1){
        this.setNumber(BigFloat.addition(this, number));
        return this;
    }
    /**
     * &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x7248;sub
     * @memberof BigFloat
     * @param {number} number
     * @return
     */
    decrement(number=1){
        this.setNumber(BigFloat.subtraction(this, number));
        return this;
    }
    trunc(cutCount=0){
        this.decimal = this.decimal.slice(0, cutCount);
        return this;
    }
    floor(cutCount=0){
        return this.trunc(cutCount);
    }
    ceil(cutCount=0){
        const fst = first(this.decimal, cutCount);
        if(fst)this.increment();
        return this.trunc(cutCount);
    }
    /**
     * &#x56DB;&#x6368;&#x4E94;&#x5165;
     * &#x6B63;&#x306E;&#x7121;&#x9650;&#x5927;&#x306E;&#x65B9;&#x5411;&#x3067;&#x306F;&#x306A;&#x304F;0&#x304B;&#x3089;&#x9060;&#x3056;&#x304B;&#x308B;&#x6B21;&#x306E;&#x6574;&#x6570;&#x306B;&#x4E38;&#x3081;&#x3089;&#x308C;&#x307E;&#x3059;&#x3002;
     *
     * @memberof BigFloat
     * @param {number} [cutCount=0]
     * @returns
     */
    round(cutCount=0){
        const fst = Number(first(this.decimal, cutCount));
        if(fst &gt;= 5)this.increment();
        return this.trunc(cutCount);
    }
    /**
     * @memberof BigFloat
     * @static
     * @param {BigFloat} n1
     * @param {BigFloat} n2
     * @returns
     */
    static max2(n1, n2){
        if(n1.integer.length !== n2.integer.length)
            return n1.integer.length &gt; n2.integer.length
                ? n1 : n2;
        const digits = {
            integer: Math.max(n1.integer.length, n2.integer.length),
            decimal: Math.max(n1.decimal.length, n2.decimal.length),
        };
        const sumValue = zip([
            n1.getNumber(digits.integer, digits.decimal),
            n2.getNumber(digits.integer, digits.decimal)
        ]);
        return forOf(sumValue, ([num1, num2])=&gt;(
            num1 !== num2 ? (num1 &gt; num2 ? num1 : num2) : void 0
        ));
    }
    /**
     * Beta: &#x52A0;&#x7B97;
     * Convert argument to BigFloat perform addition
     *
     * FIXME: &#x7B26;&#x53F7;&#x304C;&#x6B63;&#x3057;&#x304F;&#x306A;&#x3044;&#x3002;
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} target
     * @param {NumberTypes} addNum
     * @return {BigFloat} result
     */
    static addition(target, addNum){
        target = new BigFloat(target);
        addNum = new BigFloat(addNum);
        // Number&#x3067;&#x8A08;&#x7B97;&#x53EF;&#x80FD;&#x306A;&#x3089;Number&#x3067;&#x8A08;&#x7B97;
        if(isSafe(target) &amp;&amp; isSafe(addNum))
            return new BigFloat(Number(target) + Number(addNum));
        // &#x7B26;&#x53F7;&#x304C;&#x7570;&#x306A;&#x308B;&#x5834;&#x5408;&#x3001;&#x7B26;&#x53F7;&#x3092;&#x53CD;&#x8EE2;&#x3057;&#x3066;&#x6E1B;&#x7B97;
        if(target.isPositive !== addNum.isPositive){
            addNum.setSign(!addNum.isPositive);
            return BigFloat.subtraction(target, addNum);
        }
        const digits = {
            integer: Math.max(target.integer.length, addNum.integer.length),
            decimal: Math.max(target.decimal.length, addNum.decimal.length),
        };
        const sumValue = zip([
            target.getNumber(digits.integer, digits.decimal),
            addNum.getNumber(digits.integer, digits.decimal)
        ]).reduceRight((total, [targetNumber, addNumber])=&gt;{
            const carry = Number(first(total));
            const subtotal = String(carry + targetNumber + addNumber);
            return splice(total, 0, 1, subtotal.padStart(2, &quot;0&quot;));
        }, &quot;0&quot;);
        const result = new BigFloat();
        result.setNumber(sumValue);
        result.setDecimalPoint(digits.decimal);
        result.setSign(target);
        return result.format();
    }
    /**
     * Beta: &#x6E1B;&#x7B97;
     * Convert argument to BigFloat and perform subtraction
     *
     * HACK: let&#x591A;&#x3059;&#x304E;&#x554F;&#x984C;&#x3002;&#x3082;&#x3063;&#x3068;&#x30B9;&#x30B3;&#x30FC;&#x30D7;&#x3092;&#x7D5E;&#x308A;&#x305F;&#x3044;&#x3002;
     *
     * WARNING: &#x9014;&#x4E2D;&#x306E;&#x6841;&#x6D88;&#x3048;&#x3066;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x3042;&#x308A;&#x3002;splice&#x6D41;&#x7528;&#x3057;&#x3066;first&#x6D88;&#x3057;&#x3066;&#x5927;&#x4E08;&#x592B;&#x304B;&#xFF1F;
     *
     * FIXME: &#x7B26;&#x53F7;&#x304C;&#x6B63;&#x3057;&#x304F;&#x306A;&#x3044;&#x3002;
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} target
     * @param {NumberTypes} subNum
     * @return {BigFloat} result
     */
    static subtraction(target, subNum){
        target = new BigFloat(target);
        subNum = new BigFloat(subNum);
        // Number&#x3067;&#x8A08;&#x7B97;&#x53EF;&#x80FD;&#x306A;&#x3089;Number&#x3067;&#x8A08;&#x7B97;
        if(isSafe(target) &amp;&amp; isSafe(subNum))
            return new BigFloat(Number(target) - Number(subNum));
        // &#x7B26;&#x53F7;&#x304C;&#x7570;&#x306A;&#x308B;&#x5834;&#x5408;&#x3001;&#x7B26;&#x53F7;&#x3092;&#x53CD;&#x8EE2;&#x3057;&#x3066;&#x52A0;&#x7B97;
        if(target.isPositive !== subNum.isPositive){
            subNum.setSign(!subNum.isPositive);
            return BigFloat.addition(target, subNum);
            /*
            NOTE:
            (+9 - +1) = (+9 + -1) = +8 : -
            (+1 - +9) = (+1 + -9) = -8 : -

            (-9 - -1) = (-9 + +1) = -8 : -
            (-1 - -9) = (-1 + +9) = +8 : -

            (+9 - -1) = (+9 + +1) = +10 : +
            (+1 - -9) = (+1 + +9) = -10 : +

            (-9 - +1) = (-9 + -1) = -10 : +
            (-1 - +9) = (-1 + -9) = +10 : +
            */
        }
        const digits = {
            integer: Math.max(target.integer.length, subNum.integer.length),
            decimal: Math.max(target.decimal.length, subNum.decimal.length),
        };
        let borrow = false;
        let sumValue = zip([
            target.getNumber(digits.integer, digits.decimal),
            subNum.getNumber(digits.integer, digits.decimal)
        ]).reduceRight((total, [targetNumber, addNumber])=&gt;{
            // IDEA: const borrow = Number(last(total));
            let subtotal = targetNumber - addNumber - Number(borrow);
            borrow = isNegative(subtotal);
            if(borrow)subtotal += 10;
            return splice(total, 0, 1, String(Math.abs(subtotal)).padStart(2, &quot;0&quot;));
        }, &quot;0&quot;);
        if(borrow){
            const big = `1${&quot;0&quot;.repeat(sumValue.length - 1)}`;
            sumValue = BigFloat.subtraction(big, sumValue);
            // IDEA:
            // sumValue = [...sumValue].map(char=&gt;(
            //     10 - Number(char)
            // )).join(&quot;&quot;);
        }
        const result = new BigFloat();
        result.setNumber(sumValue);
        result.setDecimalPoint(digits.decimal);
        // FIXME: &#x6B63;&#x3057;&#x304F;&#x306A;&#x3044;&#x3002;&#x5927;&#x5C0F;&#x306B;&#x3088;&#x3063;&#x3066;&#x5224;&#x65AD;&#x3059;&#x3079;&#x304D;
        const max2 = BigFloat.max2(target, subNum);
        result.isPositive = max2 === subNum
            ? !subNum.isPositive
            : target.isPositive;
        return result.format();
    }
    /**
     * Beta: &#x4E57;&#x7B97;
     *
     * FIXME: &#x6841;&#x304C;&#x305A;&#x308C;&#x308B;&#x305F;&#x3081;&#x4F7F;&#x3044;&#x7269;&#x306B;&#x306A;&#x3089;&#x306A;&#x3044;
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} target
     * @param {NumberTypes} mulNum
     * @return {BigFloat} result
     */
    static multiplication(target, mulNum){
        target = new BigFloat(target);
        mulNum = new BigFloat(mulNum);
        // &#x9805;&#x306E;&#x3069;&#x3061;&#x3089;&#x304B;&#x304C;0&#x306A;&#x3089;0&#x3092;&#x8FD4;&#x3059;&#x3002;
        if(BigFloat.equals(target, 0) || BigFloat.equals(mulNum, 0))
            return new BigFloat();
        // Number&#x3067;&#x8A08;&#x7B97;&#x53EF;&#x80FD;&#x306A;&#x3089;Number&#x3067;&#x8A08;&#x7B97;
        const sumLength = target.integer.length + mulNum.integer.length;
        if(sumLength &lt; 16 &amp;&amp; !target.decimal &amp;&amp; !mulNum.decimal)
            return new BigFloat(Number(target) * Number(mulNum));
        // &#x8A08;&#x7B97;
        const targetNumbers = target.getNumber();
        const mulNumbers = mulNum.getNumber();
        const sumValue = mulNumbers.reduceRight((total, mulNumber)=&gt;{
            const subtotal = targetNumbers.reduceRight((total2, targetNumber)=&gt;{
                const fst = Number(first(total2));
                const subtotal2 = String(fst + mulNumber * targetNumber);
                return splice(total2, 0, 1, subtotal2.padStart(2, &quot;0&quot;));
            }, &quot;0&quot;);
            return BigFloat.addition(total, subtotal).toString();
        }, &quot;0&quot;);
        const result = new BigFloat();
        result.setNumber(sumValue);
        result.setDecimalPoint(target.decimal.length + mulNum.decimal.length);
        result.setSign(target.isPositive === mulNum.isPositive);
        return result.format();
    }
    power(){}
    /**
     * Alpha: &#x9664;&#x7B97;
     *
     * FIXME: &#x7B26;&#x53F7;&#x306B;&#x3088;&#x3063;&#x3066;&#x306F;&#x7121;&#x9650;&#x30EB;&#x30FC;&#x30D7;
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} target
     * @param {NumberTypes} divNum
     * @param {Number} validDigit
     * @return
     */
    static division(target, divNum, validDigit=32){
        target = new BigFloat(target);
        divNum = new BigFloat(divNum);
        if(BigFloat.equals(divNum, Infinity))
            return new BigFloat();
        if(BigFloat.equals(divNum, -Infinity))
            return new BigFloat(-0);
        if(BigFloat.equals(divNum, 0))
            return new BigFloat(NaN);
        if(BigFloat.equals(target, 0))
            return new BigFloat();
        const sumValue = forIndex(Infinity, /** @param {Number} i*/ (i)=&gt;{
            target = BigFloat.subtraction(target, divNum);
            return target.isPositive ? void 0 : i;
        });
        const result = new BigFloat();
        result.setNumber(sumValue);
        result.setDecimalPoint();
        return result.format();
    }
    /**
     * Alpha: &#x4F59;&#x5270;
     *
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} dividend &#x88AB;&#x9664;&#x6570;(&#x5272;&#x3089;&#x308C;&#x308B;&#x6570;)
     * @param {NumberTypes} divisor &#x9664;&#x6570;(&#x5272;&#x308B;&#x6570;)
     * @returns
     */
    static surplus(dividend, divisor){
        let terget = new BigFloat(dividend);
        const divisor_ = new BigFloat(divisor);
        divisor_.setSign(terget);
        const result = new BigFloat(doWhile((Continue)=&gt;{
            const subQuotient = BigFloat.subtraction(terget, divisor_);
            if(BigFloat.equals(subQuotient, 0))
                return 0;
            if(terget.isPositive === subQuotient.isPositive){
                terget = subQuotient;
                return Continue;
            }
            return terget;
        }));
        result.setSign(terget);
        return result;
    }
    /**
     * WIP: In development
     *
     * @memberof BigFloat
     * @static
     * @param {NumberTypes} dividend
     * @param {NumberTypes} divisor
     * @param {Number} [maxDigit=100]
     * @returns
     */
    static div_WIP(dividend, divisor, maxDigit=100){
        const quotientList_&#x5546; = [];
        let isComplete = false;
        const remainders = [];
        // &#x5C0F;&#x6570;&#x90E8;&#x306E;&#x6841;&#x6570;&#x304C; maxFractionPartLength &#x306B;&#x5230;&#x9054;&#x3059;&#x308B;&#x307E;&#x3067;&#x30EB;&#x30FC;&#x30D7;&#x3067;&#x51E6;&#x7406;&#x3059;&#x308B;&#x3002;
        // &#x5272;&#x308A;&#x5207;&#x308C;&#x305F;&#x308A;&#x3001;&#x5FAA;&#x74B0;&#x7BC0;&#x3092;&#x691C;&#x51FA;&#x3067;&#x304D;&#x305F;&#x7B49;&#x306E;&#x7406;&#x7531;&#x3067;&#x3001;&#x9664;&#x7B97;&#x304C;&#x5B8C;&#x4E86;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;true&#x3002;
        // &#x6841;&#x6570;&#x306E;&#x4E0D;&#x8DB3;&#x7B49;&#x3067;&#x9664;&#x7B97;&#x304C;&#x5B8C;&#x4E86;&#x3057;&#x3066;&#x3044;&#x306A;&#x3044;&#x5834;&#x5408;&#x306F;false&#x3002;
        const recurringStartIndex = forIndex(maxDigit, ()=&gt;{
            const remainder = Number(BigFloat.surplus(dividend, divisor));
            // &#x9664;&#x7B97;&#x306E;&#x5546;&#x3092;&#x6C42;&#x3081;&#x308B;&#x3002;&#x88AB;&#x9664;&#x6570;&#x304B;&#x3089;&#x5270;&#x4F59;&#x3092;&#x6E1B;&#x7B97;&#x3057;&#x3066;&#x304A;&#x304F;&#x3053;&#x3068;&#x3067;&#x3001;&#x5272;&#x308A;&#x5207;&#x308C;&#x308B;&#x9664;&#x7B97;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3002;
            quotientList_&#x5546;.push((dividend - remainder) / divisor);
            if(remainder === 0){
                // &#x5272;&#x308A;&#x5207;&#x308C;&#x305F;
                isComplete = true;
                return -1;
            }
            const recurringStartIndex = remainders.indexOf(remainder);
            if(recurringStartIndex !== -1){
                // &#x5FAA;&#x74B0;&#x7BC0;&#x3092;&#x691C;&#x51FA;
                isComplete = true;
                return recurringStartIndex;
            }
            dividend = remainder * 10;
            remainders.push(remainder);
            return void 0;
        });
        const loopPoint = recurringStartIndex === -1 ? Infinity : recurringStartIndex;
        const integer = quotientList_&#x5546;.shift();
        const decimal = quotientList_&#x5546;.slice(0, loopPoint);
        const &#x5FAA;&#x74B0;&#x5C0F;&#x6570; = quotientList_&#x5546;.slice(loopPoint);
        return { integer, decimal, &#x5FAA;&#x74B0;&#x5C0F;&#x6570;, isComplete };
    }
    /**
     *
     *
     * @memberof BigFloat
     * @static
     * @param {NumberTypes[]} numbers
     * @returns
     */
    static equals(...numbers){
        numbers = numbers.map((number)=&gt;(
            new BigFloat(number).toString()
        ));
        return equals(...numbers);
    }

    // sur(number){
    //     return this;
    // }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
